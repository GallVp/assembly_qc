includeConfig './conf/base.config'

params { 
    haplotype_fasta         = [["hap1", "./test_data/test_data1.fasta"], ["hap2", "./test_data/test_data2.fasta"]]
    
    busco {
        skip                = 0 // 1: Skip, 0: Don't
        
        // BUSCO runs for each haplotype in combination with each lineage and Augustus species
        // Full cartesian product: Haplotype x Lineage x Species
        // https://busco.ezlab.org/list_of_lineages.html
        lineage_datasets    = ["fungi_odb10", "microsporidia_odb10"]
        
        // https://bioinf.uni-greifswald.de/augustus/
        augustus_species    = ["fumigatus", "nidulans"]
        
        mode                = "geno"
        
        download_path       = "$launchDir/busco_data"
    }

    tidk {
        skip                = 0
        
        // http://telomerase.asu.edu/sequences_telomere.html
        // Plant: TTTAGGG, Fungus, Vertebrates: TTAGGG, Insect: TTAGG
        repeat_seq          = "TTAGGG"
    }

    lai {
        skip                = 0

        // Warning: EDTA modifies the sequence names.
        // Make sure the sequence names in the haplotype fasta, the pass list, and the out file match.
        // Pattern          = [["hap_name", "file_path"], ["hap_name", "file_path"]]
        pass_list           = null
        out_file            = null
        
        edta {
            is_sensitive    = 0 // 1: Sensitive (very slow), 0: Not sensitive;
        }
    }

    kraken2 {
        skip                = 0

        // Using PlusPFP-16: archaea, viral, plasmid, human, UniVec_Core, protozoa, fungi & plant capped at 16 GB
        // https://benlangmead.github.io/aws-indexes/k2
        db_url              = "https://genome-idx.s3.amazonaws.com/kraken/k2_pluspfp_16gb_20221209.tar.gz"
        download_path       = "$launchDir/kraken2db"
    }
    
    // Relative to the directory from which the pipeline is launched.
    outdir {
        main                = "./results"
    }

    max_cpus                = 32
    is_hyperthreaded        = 1 // 1: Hyperthreading is enabled, 0: Disabled

    max_memory              = 16.GB
    
    // LAI::EDTA can take a long time
    max_time                = 3.days
}

// Disabled by default till dev is complete
// process {
//     errorStrategy           = 'retry'
//     maxRetries              = 1
// }

includeConfig './conf/compiled.config'