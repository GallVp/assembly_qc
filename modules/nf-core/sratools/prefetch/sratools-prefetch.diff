Changes in module 'nf-core/sratools/prefetch'
--- modules/nf-core/sratools/prefetch/meta.yml
+++ modules/nf-core/sratools/prefetch/meta.yml
@@ -54,3 +54,4 @@
   - "@Midnighter"
 maintainers:
   - "@Midnighter"
+  - "@gallvp"

--- modules/nf-core/sratools/prefetch/main.nf
+++ modules/nf-core/sratools/prefetch/main.nf
@@ -32,4 +32,16 @@
     }
 
     template 'retry_with_backoff.sh'
+
+    stub:
+    """
+    mkdir $id
+    touch $id/${id}.sra
+
+    cat <<-END_VERSIONS > versions.yml
+    "${task.process}":
+        sratools: \$(prefetch --version 2>&1 | grep -Eo '[0-9.]+')
+        curl: \$(curl --version | head -n 1 | sed 's/^curl //; s/ .*\$//')
+    END_VERSIONS
+    """
 }

--- modules/nf-core/sratools/prefetch/tests/main.nf.test.snap
+++ modules/nf-core/sratools/prefetch/tests/main.nf.test.snap
@@ -1,4 +1,43 @@
 {
+    "sratools/prefetch/stub": {
+        "content": [
+            {
+                "0": [
+                    [
+                        {
+                            "id": "test",
+                            "single_end": false
+                        },
+                        [
+                            "DRR000774.sra:md5,d41d8cd98f00b204e9800998ecf8427e"
+                        ]
+                    ]
+                ],
+                "1": [
+                    "versions.yml:md5,83d1b23f5ff5b2ad1b96d17d7d7594ee"
+                ],
+                "sra": [
+                    [
+                        {
+                            "id": "test",
+                            "single_end": false
+                        },
+                        [
+                            "DRR000774.sra:md5,d41d8cd98f00b204e9800998ecf8427e"
+                        ]
+                    ]
+                ],
+                "versions": [
+                    "versions.yml:md5,83d1b23f5ff5b2ad1b96d17d7d7594ee"
+                ]
+            }
+        ],
+        "meta": {
+            "nf-test": "0.8.4",
+            "nextflow": "23.10.1"
+        },
+        "timestamp": "2024-05-17T20:07:31.627115"
+    },
     "sratools/prefetch with sralite": {
         "content": [
             {
@@ -77,4 +116,4 @@
         },
         "timestamp": "2024-02-28T11:48:37.428307"
     }
-}
+}
--- modules/nf-core/sratools/prefetch/tests/main.nf.test
+++ modules/nf-core/sratools/prefetch/tests/main.nf.test
@@ -46,4 +46,26 @@
             )
         }
     }
+
+    test("sratools/prefetch/stub") {
+
+        options '-stub'
+
+        when {
+            process {
+                """
+                input[0] = Channel.of([ [ id:'test', single_end:false ], 'DRR000774' ])
+                input[1] = file(params.modules_testdata_base_path + 'generic/config/ncbi_user_settings.mkfg', checkIfExists: true)
+                input[2] = []
+                """
+            }
+        }
+
+        then {
+            assertAll (
+            { assert process.success },
+            { assert snapshot(process.out).match() }
+            )
+        }
+    }
 }

************************************************************
